<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript #6: создание и добавление элементов DOM createElement, append, remove, insertAdjacentHTML</title>
</head>
<style>
    .msg{
        width: 400px;
        margin: 0 auto;
        text-align: center;
        background-color: #20454B;
        padding: 5px;
        border-radius: 5px;
        color: #eee;
        font: 24px;
    }
</style>
<body>
    <!-- <div class="msg">Важная информация!</div> -->
    <h1>Солнечная система</h1>
    <!-- before beforebegin -->
    <ul class="list">
        <!-- prepend afterend -->
        <li>Солнце</li>
        <li>Меркурий</li>
        <li>Венера</li>
        <li>Земля</li>
        <!-- append afterbegin -->
    </ul>
    <!-- after beforeend -->

    <table border="1" cellpadding="10">
        <tr><td>Солнце</td><td>Звезда</td></tr>
        <tr><td>Меркурий</td><td>Планета</td></tr>
    </table>

    <script>
        // Метод createElement создает элемент с указанным тегом
        let div = document.createElement('div');
        // className свойство для присвоения класса 
        div.className = "msg";
        div.innerHTML = "Важная информация";

        // Добавляет элемент div в конец списка body
        document.body.append(div);

        // Методы вставки элементов
        // node.prepend - вставялет узлы или строки в начало node
        // node.before - вставляет узлы или строки до node
        // node.after - вставляет узлы или строки после node
        // node.replaceWith - заменяет node заданными узлами или строками

        let list = document.querySelector("ul");
        list.before('before');
        list.after('after');

        let li_1 = document.createElement('li');
        li_1.innerHTML = "первый элемент";
        list.prepend(li_1);

        let li_2 = document.createElement('li');
        li_2.innerHTML = "последний элемент";
        list.append(li_2);

        let list = document.querySelector('ul');
        // Заменяем содержимое заданными узлами или строками
        list.replaceWith(document.createElement("hr"), "замена", document.createElement("br"));

        // Перемещаем элементы 
        let li = document.querySelector("ul > li:first-child");
        let list = document.querySelector('ul');
        list.append(li);

        // Создаем текстовые элементы 
        let textNode = document.createTextNode('Текстовый элемент');
        document.body.append(textNode);
        // Можно вставить как текст с помощью метода append
        document.body.append("<p>text");

        // Вставка HTML 
        let list = document.querySelector("ul");
        list.insertAdjacentHTML("beforebegin", "<p>Список планет<p><hr>");
        list.insertAdjacentHTML("afterend", "<hr><p>Конец списка");
        list.insertAdjacentHTML("afterbegin", "<li>Солнце");
        list.insertAdjacentHTML("beforeend", "<li>Марс");            
        
        // Вставка как текста    
        let list = document.querySelector("ul");
        list.insertAdjacentText("beforebegin", "<p>Список планет<hr>");   
      
        // Создание элемента и вставка 
        let li = document.createElement("li");
        li.innerHTML = "<b>Солнце</b>";
        list.insertAdjacentElement("afterbegin", li);   

        // Удаляем пункты меню с конца списка
        let idRemove = setInterval(function() {
            let li = document.querySelector("ul.list > li:last-child");
            if(li === null){
                clearInterval(idRemove);
                alert("Список удален");
            }
            else li.remove();
        }, 500);

        // Клонирование элемента 
        let t = document.querySelector("table");
        let r = document.querySelector("table>tbody>tr:last-child");
        let row = r.cloneNode(true);
        row.firstChild.innerHTML = "Венера";
        t.append(row);

        // DocumentFragment крайне редко используется, представляет собой минимальный объект документа, который не имеет родителя. 
        let fr = new DocumentFragment();
        let list  = ["Меркурий", "Венера", "Земля", "Марс"];
        for(let p of list){
            let item = document.createElement('li');
            item.innerHTML = p;
            fr.append(item);
        }

        let ul = document.querySelector("ul");
        // Вставляем созданный элемент DocumentFragment
        ul.append(fr);

        // Без использования DocumentFragment
        let ul = document.querySelector("ul");
        let list  = ["Меркурий", "Венера", "Земля", "Марс"];
        for(let p of list){
            let item = document.createElement('li');
            item.innerHTML = p;
            ul.append(item);
        }

        // Устаревшие методы
        // parent.appendChild(node) - добавляет элемент в конец списка дочерних элементов
        // parent.insertBefore(node, nextSibling) - вставляет элемент перед nextSibling
        // parent.removeChild(node) - удаляет элемент node (здесь parent является родителем node)
        // parent.replaceChild(newElem, node) - заменяет дочерний элемент node на новый newElem

        // Вставка фрагмента html в момент загрузки HTML-страницы
        document.write(html);

        setTimeout(function(){
            document.write('<p>Строка вставленная методом write');
        }, 500);

    </script>
</body>
</html>